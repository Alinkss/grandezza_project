{% extends "cart/cart_base.html" %}

{% block content %}

{% comment %} <h3> Your order </h3>

{% for item in cart %}
    <li>
        {{ item.pet.name }} x {{ item.quantity }}
        <span>
            {{ item.total_price }}
        </span>
    </li>
{% endfor %} {% endcomment %}

<div class="container-cart">
    <div class="product-list">
        {% for item in cart %}
            <div class="product-box">
                <div class="product-image">
                    {% if item.product_type == 'pets' %}
                    <img src="{{ item.product.images.url }}" alt="{{ item.product.name }}">
                    {% elif item.product_type == 'petprod' %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
                    {% endif %}
                </div>
                <div class="product-details">
                    <h5 class="product-name">{{ item.product.name }}</h5>
                    {% if item.product_type == 'pets' %}
                    <a href="{% url 'cart_remove' item.product.id 'pets' %}" class="btn btn-danger remove-button">Remove</a>
                    {% elif item.product_type == 'petprod' %}
                    <a href="{% url 'cart_remove' item.product.id 'petprod' %}" class="btn btn-danger remove-button">Remove</a>
                    {% endif %}
                </div>
                <div class="product-price">
                    <p>Price: {{ item.price }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
        {% if user.is_authenticated %}
        <form action="{% url 'order_created' user.id %}" method="POST">
            {% csrf_token %}
            <p class="total-cost">
                Total : ${{ cart.get_total_price }}
            </p>
            <div class="form-container">
                {{ form.as_p }}
            </div>
            <input type="submit" value="Make order" class="custom-button">
        </form>
    {% else %}
        <form action="{% url 'order_created_without_user' %}" method="POST">
            {% csrf_token %}
            <p class="total-cost">
                Total : ${{ cart.get_total_price }}
            </p>
            <div class="form-container">
                {{ form_dont_login.as_p}}
            </div>
            <input type="submit" value="Make order" class="custom-button">
        </form>
    
    {% endif %}
</div>









{% endblock content %}